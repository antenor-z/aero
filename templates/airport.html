<!DOCTYPE html>
<html>
<head>
  <title>Aeroporto {{ info.AerodromeName }} | AERO A4</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/static/style.css">
  <link rel="stylesheet" href="/static/tooltip.css">
  <link rel="stylesheet" href="/static/rwy.css">
  <link rel="stylesheet" href="/static/admin.css">
</head>
<body>
	<header>
		<span style="color: #eee; padding: 3px; font-weight: 700; border-radius: 10px;">{{ icao }}</span> // {{ info.AerodromeName }}
		{% if isLogged %}
			<a href="/area/restrita/{{ icao }}/edit" class="button-admin">Editar</a>
		{% endif %}
	</header>
	<main>
	<subheader>
		<a class="button-small" href="/">&lt Voltar</a>
		<a class="button-small" href="javascript:void(0);" onclick="copy('{{metar}}')">Copiar METAR</a>
		<a class="button-small" href="/taf/{{icao}}">TAF</a>
		<a class="button-small" href="/history/{{icao}}">Histórico</a>
		<a class="button-small" id="ellipsis-btn" href="javascript:void(0);" onclick="toggleMenu(event)">...</a>
		<div class="menu-ellipsis" id="menu" style="display: none; position: absolute;">
			<a class="button-small" href="https://conv.a4barros.com">Conversor de unidades</a>
			<a class="button-small" href="/descent">Cálculo de descida</a>
			<a class="button-small" href="/wind/">Cálculo de componentes de vento</a>
		</div>
		{% if isLogged %}
		{% if IsPublished %}
			<a class="button-small" href="/area/restrita/{{icao}}/unpublish">Ocultar</a>
		{% else %}
			<a class="button-small" href="/area/restrita/{{icao}}/publish">Publicar</a>
		{% endif %}
		{% endif %}
	</subheader>
	
	{% if info is not none %}
	<div class="line line-margin">
		{% for runway in info.runways %}
		<div class="box">
			<div class="box-value" style="display: flex; justify-content: space-around; align-items: center;">
				<div>
					<div class="runway-number tooltip">
						{{ runway.Head1 }} - {{ runway.Head2 }}
						<span style="font-weight: normal;" class="center-text tooltip">ⓘ
							<span class="tooltip tooltip-text">
								Comprimento: {{ runway.RunwayLength }} m<br />
								Largura: {{ runway.RunwayWidth }} m
							</span>
						</span>
						{% if isLogged %}
							<a href="/area/restrita/{{icao}}/runway/{{runway.Head1}}/edit" class="button-admin">Editar</a>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
		{% endfor %}
		{% if isLogged %}
			<a href="/area/restrita/{{icao}}/runway/add" class="button-admin">Adicionar Pista</a>
		{% endif %}
	</div>
	<div class="line">
		{% for comm in info.communication %}
		<div class="box-rounded box-outlined">
			<div class="box-name">{{comm.CommType}}</div>
			<div class="box-value"><b>{{comm.Frequency | frequency3 }}</b>
				{% if isLogged %}
				<a href="/area/restrita/{{icao}}/communication/{{ comm.Frequency }}/edit" class="button-admin">Editar</a>
				{% endif %}
			</div>
		</div>
		{% endfor %}
	</div>
	{% if isLogged %}
		<div class="line">
			<a href="/area/restrita/{{icao}}/communication/add" class="button-admin">Adicionar Comunicação</a>
		</div>
	{% endif %}
	{% if info.ils != None %}
	<div class="line">
		{% for ils in info.ils %}
		<div class="box-rounded box-blue">
			<div class="box-name">ILS pista {{ ils.RunwayHead }}</div>
			<div class="box-value" style="justify-content: space-between; display: flex;">
				<span>
				<b>{{ ils.Frequency | frequency1 }}</b> {{ ils.Ident }}
				</span>

				<span class="tooltip">ⓘ
					<span class="tooltip tooltip-text tooltip-left" style="text-align: right;">
						<div style="font-size: 1.1em;">ILS CAT {{ils.Category}}</div>
						Altitude de decisão: {{ ils.Minimum }}<br />
						Curso final: {{ils.CRS}}° 
					</span>
				</span>
				{% if isLogged %}
				<a href="/area/restrita/{{ icao }}/ils/{{ ils.Frequency }}/edit" class="button-admin">Editar</a>
				{% endif %}
			</div>
		</div>
		{% endfor %}
	</div>
	{% endif %}
	{% if isLogged %}
		<div class="line">
			<a href="/area/restrita/{{icao}}/ils/add" class="button-admin">Adicionar ILS</a>
		</div>
	{% endif %}
	{% if info.vor != None %}
	<div class="line">
		{% for vor in info.vor %}
		<div class="box-rounded box-orange">
			<div class="box-name">VOR</div>
			<div class="box-value">
				<b>{{ vor.Frequency | frequency1 }}</b> {{ vor.Ident }}
				{% if isLogged %}
					<a href="/area/restrita/{{icao}}/vor/{{ vor.Frequency }}/edit" class="button-admin">Editar</a>
				{% endif %}
			</div>
		</div>
		{% endfor %}
	</div>
	{% endif %}
	{% endif %}
	{% if isLogged %}
		<div class="line">
			<a href="/area/restrita/{{icao}}/vor/add" class="button-admin">Adicionar VOR</a>
		</div>
	{% endif %}
	<table class="padded-table">
		{% for (item, description) in decoded %}
		<tr>
			<td class="metarItem">{{ item }}</td>
			<td>{{ description|safe }}</td>
		</tr>
		{% endfor %}
	</table>
	</main>
	<script src="/static/copy.js"></script>
	<script>
		function toggleMenu(event) {
    const menu = document.getElementById('menu');
    
    if (menu.style.display === "none") {
        menu.style.display = "grid";
        menu.style.left = `${event.pageX-200}px`;
        menu.style.top = `${event.pageY}px`;
    } else {
        menu.style.display = "none";
    }
}

// Hide menu when clicking outside of it
document.addEventListener('click', function(event) {
    const menu = document.getElementById('menu');
    const ellipsisBtn = document.getElementById('ellipsis-btn');
    
    if (!menu.contains(event.target) && !ellipsisBtn.contains(event.target)) {
        menu.style.display = 'none';
    }
});

	</script>
	<div class="sim-only">APENAS PARA USO EM SIMULADOR</div> 
</body>
</html>

